{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Set new password" %} â€” {{ SITE_NAME }}{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center px-4 py-12">
  <div class="w-full max-w-md">

    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold">{% trans "Set new password" %}</h1>
    </div>

    <div class="card bg-base-100 shadow-lg">
      <div class="card-body gap-6">
        {% if validlink %}
        <form method="post" novalidate>
          {% csrf_token %}

          <fieldset class="fieldset">
            <label class="label" for="id_new_password1">
              <span class="label-text">{% trans "New password" %}</span>
            </label>
            <input
              type="password"
              id="id_new_password1"
              name="new_password1"
              class="input w-full text-base{% if form.new_password1.errors %} input-error{% endif %}"
              autocomplete="new-password"
              required
            >
            {% if form.new_password1.errors %}
            <p class="label-text text-error mt-1">{{ form.new_password1.errors|join:" " }}</p>
            {% endif %}
          </fieldset>

          <fieldset class="fieldset mt-4">
            <label class="label" for="id_new_password2">
              <span class="label-text">{% trans "Confirm new password" %}</span>
            </label>
            <input
              type="password"
              id="id_new_password2"
              name="new_password2"
              class="input w-full text-base{% if form.new_password2.errors %} input-error{% endif %}"
              autocomplete="new-password"
              required
            >
            {% if form.new_password2.errors %}
            <p class="label-text text-error mt-1">{{ form.new_password2.errors|join:" " }}</p>
            {% endif %}
          </fieldset>

          <div class="mt-6">
            <button type="submit" class="btn btn-primary w-full min-h-[44px]">
              {% trans "Set new password" %}
            </button>
          </div>
        </form>
        {% else %}
        <div role="alert" class="alert alert-error">
          <span>{% trans "The reset link is invalid or has expired. Please request a new one." %}</span>
        </div>
        <a href="{% url 'password_reset' %}" class="btn btn-primary w-full min-h-[44px]">
          {% trans "Request new link" %}
        </a>
        {% endif %}
      </div>
    </div>

  </div>
</div>
{% endblock %}
