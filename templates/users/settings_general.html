{% extends "users/settings_base.html" %}
{% load i18n %}

{% block tab_content %}

<div class="card bg-base-200 shadow-sm">
  <div class="card-body gap-4">

    <h2 class="card-title text-lg">{% trans "Organisation" %}</h2>

    <form method="post"
          action="{% url 'users:settings_general' %}"
          enctype="multipart/form-data"
          novalidate>
      {% csrf_token %}

      <div class="flex flex-col gap-4">

        <fieldset>
          <label class="label" for="{{ form.organization.id_for_label }}">
            <span class="label-text">{{ form.organization.label }}</span>
          </label>
          <input
            type="text"
            name="{{ form.organization.html_name }}"
            id="{{ form.organization.id_for_label }}"
            value="{{ form.organization.value|default:'' }}"
            class="input w-full text-base{% if form.organization.errors %} input-error{% endif %}"
            {% if form.organization.errors %}aria-invalid="true" aria-describedby="org-name-error"{% endif %}
          >
          {% if form.organization.errors %}
          <span id="org-name-error" class="text-error text-sm mt-1">
            {{ form.organization.errors|join:" " }}
          </span>
          {% endif %}
        </fieldset>

        <fieldset>
          <label class="label" for="{{ form.logo.id_for_label }}">
            <span class="label-text">{{ form.logo.label }}</span>
          </label>
          {% if tenant.logo %}
          <div class="mb-2 flex items-center gap-3">
            <img src="{{ tenant.logo.url }}"
                 alt="{% trans 'Current logo' %}"
                 class="h-12 w-auto rounded object-contain border border-base-300">
            <span class="text-sm text-base-content/60">{% trans "Current logo" %}</span>
          </div>
          {% endif %}
          <input
            type="file"
            name="{{ form.logo.html_name }}"
            id="{{ form.logo.id_for_label }}"
            accept="image/*"
            class="file-input w-full text-base"
          >
          {% if form.logo.help_text %}
          <span class="label-text-alt text-base-content/60 mt-1">{{ form.logo.help_text }}</span>
          {% endif %}
          {% if form.logo.errors %}
          <span class="text-error text-sm mt-1">{{ form.logo.errors|join:" " }}</span>
          {% endif %}
        </fieldset>

        <div class="card-actions justify-end pt-2">
          <button type="submit" class="btn btn-primary min-h-[44px]">
            {% trans "Save" %}
          </button>
        </div>

      </div>
    </form>

  </div>
</div>

{% endblock %}
