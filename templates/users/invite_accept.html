{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Accept invitation" %} — {{ SITE_NAME }}{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center px-4 py-12">
  <div class="w-full max-w-md">

    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold">{% trans "Accept invitation" %}</h1>
      <p class="mt-2 opacity-70">
        {% trans "Set a password for your account to get started." %}
      </p>
    </div>

    <div class="card bg-base-100 shadow-lg">
      <div class="card-body gap-6">

        {# Read-only email — shown for context, not editable #}
        <fieldset class="fieldset">
          <label class="label">
            <span class="label-text">{% trans "Email" %}</span>
          </label>
          <input
            type="email"
            value="{{ email }}"
            class="input w-full text-base bg-base-200 cursor-not-allowed"
            readonly
            disabled
            aria-readonly="true"
          >
        </fieldset>

        <form method="post" novalidate>
          {% csrf_token %}

          {# Non-field errors #}
          {% if form.non_field_errors %}
          <div role="alert" class="alert alert-error">
            <ul class="list-none m-0 p-0">
              {% for error in form.non_field_errors %}
              <li>{{ error }}</li>
              {% endfor %}
            </ul>
          </div>
          {% endif %}

          <fieldset class="fieldset">
            <label class="label" for="{{ form.password.id_for_label }}">
              <span class="label-text">{{ form.password.label }}</span>
              <span class="label-text-alt opacity-60">{% trans "Min. 8 characters" %}</span>
            </label>
            <input
              type="password"
              name="{{ form.password.html_name }}"
              id="{{ form.password.id_for_label }}"
              class="input w-full text-base{% if form.password.errors %} input-error{% endif %}"
              autocomplete="new-password"
              minlength="8"
              {% if form.password.errors %}aria-invalid="true" aria-describedby="pw-error"{% endif %}
            >
            {% if form.password.errors %}
            <p id="pw-error" class="label-text text-error mt-1">{{ form.password.errors|join:" " }}</p>
            {% endif %}
          </fieldset>

          <fieldset class="fieldset">
            <label class="label" for="{{ form.confirm_password.id_for_label }}">
              <span class="label-text">{{ form.confirm_password.label }}</span>
            </label>
            <input
              type="password"
              name="{{ form.confirm_password.html_name }}"
              id="{{ form.confirm_password.id_for_label }}"
              class="input w-full text-base{% if form.confirm_password.errors %} input-error{% endif %}"
              autocomplete="new-password"
              {% if form.confirm_password.errors %}aria-invalid="true" aria-describedby="cpw-error"{% endif %}
            >
            {% if form.confirm_password.errors %}
            <p id="cpw-error" class="label-text text-error mt-1">{{ form.confirm_password.errors|join:" " }}</p>
            {% endif %}
          </fieldset>

          <div class="form-actions mt-2">
            <button type="submit" class="btn btn-primary w-full min-h-[44px]">
              {% trans "Set password &amp; continue" %}
            </button>
          </div>

        </form>

      </div>
    </div>

  </div>
</div>
{% endblock %}
