#!/usr/bin/env bash
# .git/hooks/pre-commit — installed via scripts/install-hooks.sh
# Runs ruff + test suite before every commit.
set -e

cd "$(git rev-parse --show-toplevel)"

echo "→ ruff check..."
uv run ruff check .

echo "→ ruff format check..."
uv run ruff format --check .

echo "→ running test suite..."
uv run python manage.py test apps --verbosity=1 --keepdb

echo "✓ all checks passed"
